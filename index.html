<!DOCTYPE html>
<html lang='ja'>
<head>
  <meta charset='utf-8'>
  <title>たいとる</title>
  <meta charset="utf-8">
<style>
#gmap {
  height: 400px;
  width: 600px;
}
</style>
</head>
<body>
 
<div id="gmap"></div>
 
<script>
var markers = null; // マーカーのオブジェクト
var map;
function initMap() {
  var target = document.getElementById('gmap');
  var empire = {lat: 34.391937, lng: 135.291211};  
  //Empire State Bldg の緯度（latitude）と経度（longitude）
  map = new google.maps.Map(target, {
    center: empire,
    zoom: 14,
    mapTypeId: "hybrid"
  });
  
  	 //map.addListener('click', function(e){
  		//this.setCenter(e.latLng);
  		//this.panTo(e.latLng); アニメーションで中心位置を移動
	//});
	
	
	// クリックイベントを追加
	map.addListener('click', function(e) {
		getClickLatLng(e.latLng, map);
	});
  
 
  
 function getClickLatLng(lat_lng, map) {
	// 前のマーカーを消す
    	if(markers != null) {
    		markers.setMap(null);
    	}

	// 座標を表示
	document.getElementById('lat').textContent = lat_lng.lat();
	document.getElementById('lng').textContent = lat_lng.lng();

	// マーカーを設置
	markers = new google.maps.Marker({
		position: lat_lng,
		map: map
	});

	// 座標の中心をずらす
	map.panTo(lat_lng);
}
    
  
}
</script> 
<script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyCM6ph4cWgk7fkg8YkfKViFwuSnX5uc8sw&callback=initMap" async defer></script><!-- API_KEYの部分は取得した APIキーで置き換えます -->  
</body>
</html>
